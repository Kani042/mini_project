{% extends "base.html" %}{% block content %}
<div class="mb-3 d-flex justify-content-between">
  <a href="/checkout" class="btn btn-secondary">Back to Checkout</a>
  <a href="/orders" class="btn btn-secondary">Back to Orders</a>
</div>

<div class="d-flex justify-content-between">
  <h3>Invoice {{ invoice.invoice_number }}</h3>
  <button onclick="window.print()" class="btn btn-outline-secondary">Print / Save as PDF</button>
</div>
<div class="mb-3">
  <strong>Customer:</strong> {{ user.name or 'N/A' }}<br>
  <strong>Mobile:</strong> {{ user.mobile }}<br>
  <strong>Date:</strong> {{ invoice.created_at }}
</div>
<table class="table table-striped">
  <thead><tr><th>SKU</th><th>Item</th><th>Qty</th><th>Unit price</th><th>Line total</th></tr></thead>
  <tbody>
    {% for li in lines %}
    <tr>
      <td>{{ li.sku }}</td>
      <td>{{ li.name }}</td>
      <td>{{ li.quantity }}</td>
      <td>${{ '%.2f'|format(li.unit_price) }}</td>
      <td>${{ '%.2f'|format(li.line_total) }}</td>
    </tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr><th colspan="4" class="text-end">Subtotal</th><th>${{ '%.2f'|format(invoice.subtotal) }}</th></tr>
    <tr><th colspan="4" class="text-end">Tax</th><th>${{ '%.2f'|format(invoice.tax) }}</th></tr>
    <tr><th colspan="4" class="text-end">Total</th><th>${{ '%.2f'|format(invoice.total) }}</th></tr>
  </tfoot>
</table>
{% endblock %}
