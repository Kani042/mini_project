{% extends "base.html" %}

{% block title %}Orders - Royal Mart{% endblock %}

{% block content %}
  <!-- ensure shared stylesheet loaded -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/site.css') }}">

  <div class="container">
    <!-- header consistent with dashboard -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="mb-0">All Orders</h2>
      
    </div>

    {% if invoices %}
      <!-- match Dashboard style: same table classes and spacing -->
      <table class="table table-striped mt-3">
        <thead>
           <tr>
             <th>Invoice #</th>
             <th>Customer Name</th>
             <th>Mobile</th>
             <th>Items</th>
             <th>Subtotal</th>
             <th>Tax</th>
             <th>Total</th>
             <th>Date</th>
             <th>Action</th>
           </tr>
         </thead>
         <tbody>
           {% for invoice in invoices %}
             <tr>
               <td><strong>{{ invoice.invoice_number }}</strong></td>
               <td>{{ invoice.customer_name or "N/A" }}</td>
               <td>{{ invoice.mobile }}</td>
               <td>
                 {% set item_count = 0 %}
                 {# Count items logic #}
                 <span class="badge bg-info">View Items</span>
               </td>
               <td>${{ "%.2f"|format(invoice.subtotal) }}</td>
               <td>${{ "%.2f"|format(invoice.tax) }}</td>
               <td><strong>${{ "%.2f"|format(invoice.total) }}</strong></td>
               <td>
                {% if invoice.created_at %}
                  {{ invoice.created_at.strftime('%Y-%m-%d') }}
                {% else %}
                  N/A
                {% endif %}
               </td>
               <td>
                 <a href="/invoices/{{ invoice.id }}" class="btn btn-sm btn-primary">View</a>
               </td>
             </tr>
           {% endfor %}
         </tbody>
      </table>
    {% else %}
      <div class="alert alert-info">
        <h5>No Orders Yet</h5>
        <p>Start making sales! Go to <a href="/checkout">Checkout</a> to create an order.</p>
      </div>
    {% endif %}

    <style>
      .table-hover tbody tr:hover {
        background-color: #f5f5f5;
      }
    </style>
  </div>
{% endblock %}
